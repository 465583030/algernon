<!doctype html>
<html>
  <head>
    <title>Server Event</title>
    <script>

    if (!!window.EventSource) {
      var source = new EventSource('stream');
    
      source.addEventListener('message', function(e) {
        console.log(e.data);
      }, false);
      
      source.addEventListener('open', function(e) {
        // Connection was opened.
        console.log("Connection was opened!");
      }, false);
      
      source.addEventListener('error', function(e) {
        if (e.readyState == EventSource.CLOSED) {
          // Connection was closed.
          console.log("Connection was closed!");
        }
      }, false);
    
    }

    </script>
  </head>
  <body>
  hi there
  </body>
</html>
